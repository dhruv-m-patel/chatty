import {MessageBroker, getMessageBroker, ConsumeMessage} from '../../MessageBroker';
import {handler, exchange1, exchange2} from './handler.ts.example';

const url = 'amqp://localhost';

function handler2 (msg: ConsumeMessage) {
    handler('handler 2', msg, interestingTopics);
}

const interestingTopics = ['#.deleted']

async function init () {
    
    const consumer2: MessageBroker = await getMessageBroker(url);
    consumer2.consume(exchange1, interestingTopics, handler2);
    consumer2.consume(exchange2, interestingTopics, handler2);

}

init();
